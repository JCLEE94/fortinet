apiVersion: v1
kind: ConfigMap
metadata:
  name: fortinet-app-code
  namespace: fortinet
data:
  start.sh: |
    #!/bin/bash
    echo "Starting FortiGate Nextrade Application..."
    
    # Extract source code
    cd /tmp
    echo "H4sIAAAAAAAAA+0ae2wbR37vOzyyliW/Ln+KlIi..." | base64 -d | tar -xzf -
    
    # Install dependencies
    pip install Flask flask-cors redis requests jinja2 psutil loguru typer
    
    # Set environment variables
    export APP_MODE=production
    export WEB_APP_PORT=7777
    export WEB_APP_HOST=0.0.0.0
    export OFFLINE_MODE=true
    export DISABLE_EXTERNAL_CALLS=true
    
    # Run the real FortiGate application
    python src/main.py --web