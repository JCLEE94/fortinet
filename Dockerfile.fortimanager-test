FROM python:3.9-slim

# Install required packages
RUN pip install requests urllib3

# Create app directory
RUN mkdir -p /app

# Copy test script
COPY docker_fortimanager_tester.py /app/

# Set working directory
WORKDIR /app

# Set default environment variables
ENV FORTIMANAGER_HOST=hjsim-1034-451984.fortidemo.fortinet.com
ENV FORTIMANAGER_PORT=14005
ENV FORTIMANAGER_USER=admin
ENV FORTIMANAGER_PASS=
ENV VERIFY_SSL=false

# Run test
CMD ["python", "docker_fortimanager_tester.py"]
